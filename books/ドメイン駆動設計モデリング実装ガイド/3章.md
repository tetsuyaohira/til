# 3章　DDD固有のモデリング手法

## 3.1 集約

### 3.1.2 設計/実装時のルール

- トランザクションを必ず1つにする

> 1つの集約のオブジェクトは、必ず集約単位でリポジトリから取得し、集約単位でリポ
> ジトリに渡します。そして、1 トランザクションで集約内のすべてのオブジェクトを更新
> します。集約の中の一部オブジェクトのみの取得/更新は許可しません

- このルールを守りながら、ドメインモデル図を作成していくとなると、結構難しそうですね。
- 予約とかは、たくさんのテーブルが関連しているので。ユーザはわかりやすそう
- 「第6 章6.7 複数集約間の整合性確保」で説明があるのかも


### 3.1.3 集約の境界の決め方

- 書かれているように集約の境界を決めるのは難しい
- 例が学校-部活の例となっており、理解しやすいが、実際の業務での例が知りたい

## 3.3 Q&A

### 3.3.1 DBへの意識
- RDBは重複がない正規化された状態にするが、ドメインモデルは重複があってもいいのか
- 境界づけられたコンテキストごとにテーブルを分けたりするのか？

### 3.3.2 集約とトランザクション
> 集約に関しては特に、モデリング時に決めきろうと考えず、実装してからまたモデルに
戻って試行錯誤するぐらいのスタンスで望むと良いでしょう。
- やっぱり集約を決めるのは難しい。。